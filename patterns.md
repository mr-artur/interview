# Паттерны
+ [Что такое _Паттерн_?](#Что-такое-Паттерн)
+ [Классификация паттернов](#Классификация-паттернов)
+ [Factory Method (Фабричный метод)](#Factory-Method-Фабричный-метод) ([цель](#Назначение-Фабричного-метода) | [схема](#Схема-Фабричного-метода) | [преимущества](#Преимущества-Фабричного-метода) | [недостатки](#Недостатки-Фабричного-метода) | [использование](#Использование-Фабричного-метода))
+ [Abstract Factory (Абстрактная фабрика)](#Abstract-Factory-Абстрактная-фабрика) ([цель](#Назначение-Абстрактной-фабрики) | [схема](#Схема-Абстрактной-фабрики) | [преимущества](#Преимущества-Абстрактной-фабрики) | [недостатки](#Недостатки-Абстрактной-фабрики) | [использование](#Использование-Абстрактной-фабрики))
+ [Builder (Строитель)](#Builder-Строитель) ([цель](#Назначение-Строителя) | [схема](#Схема-Строителя) | [преимущества](#Преимущества-Строителя) | [недостатки](#Недостатки-Строителя) | [использование](#Использование-Строителя))
+ [Prototype (Прототип)](#Prototype-Прототип) ([цель](#Назначение-Прототипа) | [схема](#Схема-Прототипа) | [преимущества](#Преимущества-Прототипа) | [недостатки](#Недостатки-Прототипа) | [использование](#Использование-Прототипа))

## Что такое _Паттерн_?
_Паттерны (шаблоны) проектирования_ - это способы решения часто встречающихся проблем при проектировании программ.

[к оглавлению](#Паттерны)

## Классификация паттернов
По предназначению паттерны делятся на `3` группы :
+ ___Порождающие___ - те, которые беспокоятся о гибком создании объектов без внесения в программу лишних зависимостей. К порождающим паттернам относятся :
    + Фабричный метод
    + Абстрактная фабрика
    + Строитель
    + Прототип
    + Одиночка
+ ___Структурные___ - те, которые описывают разные способы построения связей между объектами. К структурным паттернам относятся :
    + Адаптер
    + Мост
    + Компоновщик
    + Декоратор
    + Фасад
    + Легковес
    + Заместитель
+ ___Поведенческие___ - те, которые заботятся об эффективной коммуникации между объектами. К поведенческим паттернам относятся :
    + Цепочка обязанностей
    + Команда
    + Итератор
    + Посредник
    + Снимок
    + Наблюдатель
    + Состояние
    + Стратегия
    + Шаблонный метод
    + Посетитель
    + Делегат
    
[к оглавлению](#Паттерны)

## Factory Method (Фабричный метод)
_Фабричный метод_ определяет стандартный метод создания объекта, не связанный с вызовом конструктора, оставляя решение о том, какой именно объект создавать, за подклассами.

[к оглавлению](#Паттерны)

### Назначение Фабричного метода
+ Фабричный метод позволяет отделить логику создания объектов от их использования в клиентском коде. Благодаря этому, код производства можно изменять, не трогая основной (клиентский). Например, мы можем добавить кеширование объектов, поместив его код в фабричный метод, не засоряя при этом клиентский код.
+ Фабричный метод нужен для создания объектов разных типов с помощью одного и того же интерфейса.

[к оглавлению](#Паттерны)

### Схема Фабричного метода
![alt text](https://i.ibb.co/7t6z3mS/pattern-1.jpg)

+ `Product` - интерфейс создаваемых объектов.
+ `ConcreteProduct` - реализация `Product`. Создание объектов этого класса возлагается на класс `ConcreteCreator`.
+ `Creator` - интерфейс, который определяет метод, "фабрикующий" объекты.
+ `ConcreteCreator` - класс, реализующий интерфейс `Creator` и соответственно определяющий тело метода `factoryMethod()`. Этот метод может возвращать любой объект, реализующий интерфейс `Product`.

[к оглавлению](#Паттерны)

### Преимущества Фабричного метода
+ Избавляет клиентский код от привязки к конкретному классу продукта.
+ Выделяет код производства продуктов в одно место, упрощая поддержку кода.
+ Упрощает добавление новых продуктов в программу.
+ Реализует _Open / Closed_ принцип.

[к оглавлению](#Паттерны)

### Недостатки Фабричного метода
+ Может привести к созданию больших параллельных иерархий классов, так как для каждого класса продукта надо создавать свой класс создателя.

[к оглавлению](#Паттерны)

### Использование Фабричного метода
В примерах фабричного метода создающие методы возвращают объект конкретного подтипа.
+ `java.lang.Object.toString()` - переопределяемый во всех подклассах фабричный метод.
+ `java.lang.Class.newInstance()`
+ `java.lang.Integer.valueOf(String)` (также в `Boolean`, `Byte`, `Character`, `Short`, `Long`, `Float` и `Double`).
+ `java.lang.Class.forName()`
+ `java.lang.reflect.Array.newInstance()`
+ `java.lang.reflect.Constructor.newInstance()`
+ `java.util.Map.of()` и т.д.

[к оглавлению](#Паттерны)

## Abstract Factory (Абстрактная фабрика)
_Абстрактная фабрика_ помогает нам создавать семейства связанных объектов, не привязываясь к к конкретным классам создаваемых объектов. 

Абстрактная фабрика является расширением _Фабричного метода_ и может быть создана вследствии наличия большого количества фабричных методов, которые реорганизовывают в иерархию классов.

[к оглавлению](#Паттерны)

### Назначение Абстрактной фабрики
+ Помогает производить семейства продуктов (связанных между собой), при этом клиентский код может работать с такими семействами одинаково.

[к оглавлению](#Паттерны)

### Схема Абстрактной фабрики
![alt text](https://i.ibb.co/Y8kcZ48/pattern-2.jpg)

+ `AbstractFactory` - абстрактный класс или интерфейс, который определяет механизмы создания абстрактных продуктов.
+ `AbstractProduct` - абстрактный класс или интерфейс, который который описывает базовые функции ресурса, который будет использоваться в приложении.
+ `ConcreteFactory` - класс, порожденный от класса `AbstractFactory` и реализующий методы получения одного или нескольких конкретных продуктов.
+ `ConcreteProduct` - класс, порожденный от класса `AbstractProduct` и реализующий конкретный ресурс.

[к оглавлению](#Паттерны)

### Преимущества Абстрактной фабрики
+ Гарантирует сочитаемость создаваемых продуктов.
+ Избавляет клиентский код от привязки к конкретным типам продуктов
+ Выделяет код производства продуктов в одно место, упрощая поддержку кода.
+ Упрощает добавление новых продуктов и их семейств в программу.
+ Реализует _Open / Closed_ принцип.

[к оглавлению](#Паттерны)

### Недостатки Абстрактной фабрики
+ Усложняет код программы из-за введения множества дополнительных классов.
+ Требует наличия всех типов продуктов в каждом семействе.

[к оглавлению](#Паттерны)

### Использование Абстрактной фабрики
В примерах абстрактной фабрики создающие методы возвращают объект типа интерфейса или абстрактного класса.
+ `java.util.Calendar.getInstance()`
+ `java.util.Arrays.asList()`
+ `java.util.ResourceBundle.getBundle()`
+ `java.net.URL.openConnection()`
+ `java.sql.DriverManager.getConnection()`
+ `java.sql.Connection.createStatement()`
+ `java.sql.Statement.executeQuery()`
+ `java.text.NumberFormat.getInstance()`
+ `java.lang.management.ManagementFactory` (все `getXXX()` методы)
+ `java.nio.charset.Charset.forName()`
+ `javax.xml.parsers.DocumentBuilderFactory.newInstance()`
+ `javax.xml.transform.TransformerFactory.newInstance()`
+ `javax.xml.xpath.XPathFactory.newInstance()`
+ `java.net.URLStreamHandlerFactory.createURLStreamHandler(String)` (Возвращает синглтон для каждого протокола)

[к оглавлению](#Паттерны)

## Builder (Строитель)
_Строитель_ позволяет нам создавать сложные объекты пошагово.

[к оглавлению](#Паттерны)

### Назначение Строителя
+ Главное назначение - это пошаговое построение сложных объектов.
+ Позволяет избавиться от сложных конструкторов.
+ Может использоваться для того, чтобы строить объекты разными способами (применение разных строителей с одним интерфейсом).

[к оглавлению](#Паттерны)

### Схема Строителя
![alt text](https://i.ibb.co/s1MxqNK/pattern-3.jpg)

+ `Director` - необязательный элемент. Содержит ссылку на экземпляр `AbstractBuilder`. По этой ссылке класс `Director` вызывает методы создания конкретного генератора классов, которые создают различные части продукта, что в итоге приводит к созданию объекта-продукта.
+ `AbstractBuilder` - интерфейс, определяющий методы, предназначенные для создания отдельных частей продукта.
+ `ConcreteBuilder` - класс, реализующий интерфейс `AbstractBuilder`. Он содержит реализацию всех его методов, нужных для создания `Product`. У класса `ConcreteBuilder` обязательно должен быть метод, возвращающий итоговый объект `Product`.
+ `Product` - полученный объект, может быть объявлен и как интерфейс.

[к оглавлению](#Паттерны)

### Преимущества Строителя
+ Позволяет создавать объекты пошагово.
+ Позволяет использовать один и тот же код для создание разных объектов.
+ Изолирует сложный код сборки продукта от его основной бизнес-логики.
+ Позволяет избежать огромных конструкторов.

[к оглавлению](#Паттерны)

### Недостатки Строителя
+ Усложняет код программы из-за добавления большего количества классов.
+ Клиент будет привязан к конкретным классам-строителям, так как в интерфейсе строителя может не быть метода получения результата.

[к оглавлению](#Паттерны)

### Использование Строителя
В примерах строителя создающие методы возаращают объект, на котором вызывается метод.
+ `java.lang.StringBuilder.append()` (несинхронизированный)
+ `java.lang.StringBuffer.append()` (синхронизированный)
+ `java.nio.ByteBuffer.put()` (также в `CharBuffer`, `ShortBuffer`, `IntBuffer`, `LongBuffer`, `FloatBuffer` and `DoubleBuffer`)
+ `javax.swing.GroupLayout.Group.addComponent()`
+ Все имплементации `java.lang.Appendable`

[к оглавлению](#Паттерны)

## Prototype (Прототип)
_Прототип_ позволяет нам копировать объекты, не вдаваясь в подробности их реализации.

Паттерн Прототип поручает создание копий самим копируемым объектам.

[к оглавлению](#Паттерны)

### Назначение Прототипа
+ Копирование любого объекта с помощью одного и того же интерфейса, не вникая в реализацию. Обычно это метод `clone()`.

[к оглавлению](#Паттерны)

### Схема Прототипа
![alt text](https://i.ibb.co/JcX9RK6/pattern-4.jpg)

Как видно из схемы, объект класса `Prototype` сам отвечает за свое копирование.

[к оглавлению](#Паттерны)

### Преимущества Прототипа
+ Позволяет копировать объекты, не привязываясь к их конкретным классам.
+ Меньше повторяющегося кода инициализации объектов.
+ Ускоряет создание объектов.
+ Альтернатива созданию подклассов для конструирования сложных объектов.

[к оглавлению](#Паттерны)

### Недостатки Прототипа
+ Сложность в клонировании составных объектов, имеющих ссылки на другие объекты.

[к оглавлению](#Паттерны)

### Использование Прототипа
В примерах прототипа создающие методы возвращают новый инстанс с такими же свойствами.
+ `java.lang.Object.clone()` (класс должен имплементировать `java.lang.Cloneable`)

[к оглавлению](#Паттерны)
