# Hibernate
+ [Что такое _«Hibernate»_?](#Что-такое-Hibernate)
+ [Какие преимущества использования _Hibernate_?](#Какие-преимущества-использования-Hibernate)
+ [Какие преимущества _Hibernate_ над _JDBC_?](#Какие-преимущества-Hibernate-над-JDBC)
+ [Способы конфигурации Hibernate](#Способы-конфигурации-Hibernate)
+ [`SessionFactory`](#SessionFactory)

## Что такое _«Hibernate»_?
_Hibernate_ - это фреймворк-провайдер _JPA_, который соответственно предназначен для решения задач объектно-реляционного отображения.

[к оглавлению](#Hibernate)

## Какие преимущества использования _Hibernate_?
Hibernate является одним из самых используемых ORM-фреймворков в Java. И вот по каким причинам :
1. Hibernate помогает избежать множества boilerplate кода, который постоянно предследует разработчика в работе в JDBC. Это происходит благодаря тому, что он скрывает от разработчка множество кода, необходимого для управления ресурсами и позволяет сосредоточиться таким образом на бизнес логике.
2. Hibernate поддерживает как XML, так и JPA аннотации, что позволяет сделать реализацию кода независимой.
3. Hibernate предоставляет собственный мощный язык запросов HQL, который похож на SQL, но при этом полностью объектно ориентирован и работает с такими принципами, как наследование, полиморфизм и ассоциация(связи).
4. Hibernate - это широко распространенный open-source проект, благодаря этому доступно очень много статей, примеров и документации по его использованию.
5. Hibernate легко интегрируется с другими Java EE фреймворками, такими как например Spring - он поддерживает встроенную интеграцию с Hibernate.
6. Hibernate поддерживает ленивую инициализацию с использованием proxy объектов и выполняет запросы к базе данных только по необходимости.
7. Hibernate поддерживает разные уровни cache, а следовательно благодаря этому также повышает производительность.
8. Hibernate также может использовать чистый QL, а значит, и поддерживает возможность оптимизации запросов и работы с любым сторонним вендором БД и его фичами.

[к оглавлению](#Hibernate)

## Какие преимущества _Hibernate_ над _JDBC_?
1. Hibernate убирает множество повторяющегося кода из JDBC API, а следовательно, его легче читать, писать и поддерживать.
2. Hibernate поддерживает наследование, наследование, ассоциации и коллекции, что не доступно в JDBC API.
3. Hibernate неявно использует управление транзакциями. Большинство запросов нельзя выполнить без транзакции. При использовании JDBC API для управления транзакциями же нужно явно использовать `commit` и `rollback`.
4. JDBC API выбрасывает `SQLException`, которое относится к checked-исключениям, а значит необходимо постоянно писать множество блоков `try-catch`. Hibernate же оборачивает исключения JDBC в непроверяемые `JDBCException` и `HibernateException`, а значит нет необходимости их проверять в коде каждый раз. Встроенная поддержка управления транзакциями в Hibernate убирает блоки `try-catch`.
5. HQL более объектно-ориентированный и близкий к Java язык запросов, чем SQL в JDBC.
6. Hibernate поддерживает кеширование, а JDBC - нет, что может понизить производительность.
7. Конфигурация Hibernate позволяет использовать JDBC вроде соединения по типу JNDI DataSource для пула соединений. Это важная фича для энтерпрайз приложений, которая полностью отсутствует в JDBC API.
8. Hibernate поддерживает аннотации JPA, а значит код является переносимым на другие фреймворки, реализующие стандарт, в то время как код JDBC сильно привязан к приложению.

[к оглавлению](#Hibernate)

## Способы конфигурации Hibernate
Существует `4` способа конфигурации работы с Hibernate : 
+ Используя аннотации
+ hibernate.cgf.xml
+ hibernate.properties
+ persistence.xml

Самый частый способ конфигурации - через аннотации и файл persistence.xml, что касается файлов hibernate.properties и hibernate.cfg.xml, то hibernate.cfg.xml главнее(перекрывает первый файл). Конфигурация файлами хоть и удобна, но не всегда возможна. Например, если для разных баз данных или для разных ситуаций мы хотим иметь разные конфигурации сущностей, то следует использовать xml файлы конфигураций.

[к оглавлению](#Hibernate)

## `SessionFactory`
+ `SessionFactory` является фабрикой сессий и используется для получения объектов `Session`.
+ `SessionFactory` отвечает за считывание параметров конфигурации Hibernate и подключение к базе данных.
+ `SessionFactory` - очень тяжелый объект, поэтому обычно в приложении имеется только один экземпляр `SessionFactory` и потоки, обслуживающие клиентские запросы, получают экземпляры `Session` с помощью этого объекта фабрики сессий.
+ Необходима как минимум одна `SessionFactory` для каждой БД, с которой мы работаем в приложении, и каждая из них будет со своим конфигурационным файлом.
+ `SessionFactory` является _immutable_ классом, внутреннее состояние экземпляра задается при его создании и включает в себя все метаданные об Object-relational Mapping.
+ `SessionFactory` также предоставляет методы для получения метаданных класса и статистики, такой как данные про второй уровень кеша, выполняемые запросы и т.д.
+ `SessionFactory` является потокобезопасным, так как его объекты _immutable_. Таким образом, множество потоков могут обращаться к одному объекту одновременно.

[к оглавлению](#Hibernate)
