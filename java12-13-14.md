# Java 12-13-14
+ [Что нового появилось в Java 12?](#Что-нового-появилось-в-Java-12)
    + [Switch Expressions (Preview)](#Switch-Expressions-Preview)
+ [Что нового появилось в Java 13?](#Что-нового-появилось-в-Java-13)
    + [Текстовые блоки (Preview)](#Текстовые-блоки-Preview)
    + [Измененные Switch Expressions (Preview)](#Измененные-Switch-Expressions-Preview)
+ [Что нового появилось в Java 14?](#Что-нового-появилось-в-Java-14)

## Что нового появилось в Java 12?
+ Почти все изменения внутренние, это всякие модификации сборщиков мусора, редко используемые в работе вещи и прочие мелкие улучшения.
+ Единственная полезная вещь - это _Switch Expressions_, но и они добавлены как _Preview_. ([_перейти_](#Switch-Expressions-Preview))

[к оглавлению](#Java-12-13-14)

## Switch Expressions (Preview)
Раньше мы писали `switch` так :
```java
public class Main {
    public static void main(String[] args) {
        int moneyType = 3;
        String moneyDescription;
        switch (moneyType) {
            case 1:
            case 2:
                moneyDescription = "Gold";
                break;
            case 3:
                moneyDescription = "Aden";
                break;
            case 4:
            case 5:
                moneyDescription = "Dollar";
                break;
            default:
                moneyDescription = "Septim";
        }
        System.out.println("moneyDescription = " + moneyDescription);
    }
}
```
Теперь можно переписать этот код с помощью _Switch expressions_ :
```java
public class MainSwitchExpression {
    public static void main(String[] args) {
        int moneyType = 3;
        String moneyDescription;
        switch (moneyType) {
            case 1, 2 -> moneyDescription = "Gold";
            case 3 -> moneyDescription = "Aden";
            case 4, 5 -> moneyDescription = "Dollar";
            default -> moneyDescription = "Septim";
        };
        System.out.println("moneyDescription = " + moneyDescription);
    }
}
```
Теперь можно скомпилировать и запустить код. По умолчанию _Switch Expressions_ отключены, так как это Preview возможность. Компилировать нужно с ключом `--enable-preview --release 12` :
```java
$ javac --enable-preview --release 12 MainSwitchExpression.java
Note: MainSwitchExpression.java uses preview language features.
Note: Recompile with -Xlint:preview for details.
 
$ java --enable-preview MainSwitchExpression
moneyDescription = Aden
```
Также можно уменьшить количество строк, так как сам `switch` теперь может возвращать значение :
```java
public class MainSwitchExpression {
    public static void main(String[] args) {
        int moneyType = 3;
        String moneyDescription = switch (moneyType) {
            case 1, 2 -> "Gold";
            case 3 -> "Aden";
            case 4, 5 -> "Dollar";
            default -> "Septim";
        };
        System.out.println("moneyDescription = " + moneyDescription);
    }
}
```
Также можно использовать `break`, чтобы возвращать значение из `switch` :
```java
public class MainSwitchBreakWithValue {
    public static void main(String[] args) {
        int moneyType = 3;
        String moneyDescription = switch (moneyType) {
            case 1:
            case 2:
                System.out.println("Some text");
                break "Gold";
            case 3:
                break "Aden";
            case 4:
            case 5:
                break "Dollar";
            default:
                break "Septim";
        };
        System.out.println("moneyDescription = " + moneyDescription);
    }
}
```

[к оглавлению](#Java-12-13-14)

## Что нового появилось в Java 13?
+ Текстовые блоки, но в _Preview_ ([_перейти_](#Текстовые-блоки-Preview))
+ Немного измененные _Switch Expressions_, но все так же в _Preview_ ([_перейти_](#Измененные-Switch-Expressions-Preview))
+ Фикс того, что garbage collector _ZGS_ не отдавал занятую память, даже когда она ему уже была не нужна

[к оглавлению](#Java-12-13-14)

## Текстовые блоки (Preview)
В Java 12 уже была попытка добавить подобное, но в итоге фича не вошла даже в _Preview_.

В Java 13 текстовые блоки таки попали в _Preview_, но уже с другим синтаксисом. 

Напишем код, использующий текстовые блоки :
```java
public class Main {
    public static void main(String[] args) {
        System.out.println("""
            <html>
                <head>
                    <title>World</title>
                </head>
                <body>
                    <p>Hello, World!</p>
                </body>
            </html>
            """);
    }
}
```
Чтобы скомпилировать этот код, надо использовать специальные флаги, так как фича находится в _Preview_ :
```java
javac --enable-preview --release 13 Main.java
java --enable-preview Main
```
В результате в консоли получим следующее :
```java
> javac --enable-preview --release 13 Main.java
Note: Main.java uses preview language features.
Note: Recompile with -Xlint:preview for details.
 
> java --enable-preview Main
<html>
    <head>
        <title>World</title>
    </head>
    <body>
        <p>Hello, World!</p>
    </body>
</html>
```

[к оглавлению](#Java-12-13-14)

## Измененные Switch Expressions (Preview)
В Java 13 эта фича все еще осталась в _Preview_, и теперь вместо для возвращения значения из `switch` решили использовать `yield` вместо `break` :
```java
public class MainSwitchBreakWithValue {
    public static void main(String[] args) {
        int moneyType = 3;
        String moneyDescription = switch (moneyType) {
            case 1:
            case 2:
                System.out.println("Some text");
                yield "Gold";
            case 3:
                yield "Aden";
            case 4:
            case 5:
                yield "Dollar";
            default:
                yield "Septim";
        };
        System.out.println("moneyDescription = " + moneyDescription);
    }
}
```
Компиляция и запуск :
```java
> javac --enable-preview --release 13 MainSwitchBreakWithValue.java
Note: MainSwitchBreakWithValue.java uses preview language features.
Note: Recompile with -Xlint:preview for details.
 
> java --enable-preview MainSwitchBreakWithValue
moneyDescription = Aden
```

[к оглавлению](#Java-12-13-14)

## Что нового появилось в Java 14?

[к оглавлению](#Java-12-13-14)
