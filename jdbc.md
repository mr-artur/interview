# JDBC
+ [Что такое _«JDBC»_?](#Что-такое-JDBC)
+ [Для чего нужен _JDBC_?](#Для-чего-нужен-JDBC)
+ [Архитектура _JDBC_](#Архитектура-JDBC)
+ [`DriverManager`](#DriverManager)
+ [Драйверы](#Драйверы)

## Что такое _«JDBC»_?
+ _JDBC_ (Java Database Connectivity) - это стандартный API для работы с разными базами данных в языке Java.
+ Для работы с конкретной базой данных необходимо установить специальный драйвер для нее, котоырый является адаптером Java-приложения под конкретную БД.
+ _JDBC_ входит в стандартную библиотеку Java. Его классы находятся в пакетах `java.sql` и `javax.sql`.

[к оглавлению](#JDBC)

## Для чего нужен _JDBC_?
_JDBC_ решает следующие задачи :
+ Создание соединения с БД.
+ Создание _SQL_ - выражений.
+ Выполнение _SQL_ - запросов.
+ Получение данных из базы, их обновление, удаление, а также вставка новых.

[к оглавлению](#JDBC)

## Архитектура _JDBC_
+ Архитектура _JDBC_ может быть как `2` - х звенной, так и `3` - х звенной, но в общем случае она состоит из `2` - х слоев :
    + JDBC API - обеспечивает соединение приложения с JDBC Manager.
    + JDBC Driver API - обеспечивает соединение JDBC Manager с драйвером.
+ JDBC API использует менеджер драйверов и специальные драйверы БД для обеспечения подключения к базам данных.
+ JDBC Manager проверяет соответствие драйвера с конкретной БД. Он поддерживает использование нескольких драйверов одновременно для одновременной работы с несколькими БД.

Схематично JDBC можно представить в таком виде :

![alt text](https://pro-java.ru/wp-content/uploads/2015/03/JDBC-Architecture.gif)

[к оглавлению](#JDBC)

## `DriverManager`
+ `DriverManager` - это ключевая сущность JDBC, которая управляет списком драйверов БД. 
+ `DriverManager` позволяет нам указывать ему, какие драйвера необходимо загрузить в его список.
+ `DriverManager` также позволяет устанавливать соединение с базами данных с помощью вызова `DriverManager.getConnection`, который принимает в качестве аргументов параметры подключения. `DriverManager` смотрит на `URL`, переданный как аргумент, и опрашивает имеющиеся драйверы в поиске подходящего. После он устанавливает соединение с БД с помощью ПЕРВОГО подошедшего по урлу драйвера.

[к оглавлению](#JDBC)

## Драйверы
+ _Драйвер_ - это сущность, которая непосредственно отвечает за взаимодействие с опреденной БД. Работать нам с ней приходится крайне редко, так как вместо этого мы используем объекты `DriverManager`, которые управляют драйверами.
+ Именно драйвер дает нам возможность открывать соединения, выполнять `SQL` - запросы и т.п.
+ Чтобы БД могла работать с _JDBC_, ее разработчики должны написать соответствующую имплементацию интерфейса `java.sql.Driver`.

[к оглавлению](#JDBC)

## Типы драйверов
+ ___Тип 1_. JDBC - ODBC транслятор__.
    + Этот тип драйвера транслирует JDBC в установленный на каждой клиентской машине ODBC (Open Database Connectivity). Использование ODBC требует конфигурации DSN, который является целевой БД.
    + Схема работы JDBC - ODBC транслятора :
    
        ![alt text](https://i0.wp.com/proselyte.net/wp-content/uploads/2016/03/jdbc-driver-type1.jpg?resize=300%2C254&ssl=1)
    + Изначально, именно этот тип драйверов был самым используемым, так как большинство БД поддерживало только ODBC.

+ ___Тип 2_. JDBC - нативный API__.
    + В этом драйвере JDBC API преобразовывается в уникальный для каждой БД нативный C/C++ API. 
    + Его принцип работы довольно схож с драйвером первого типа.
    + Схема работы JDBC - нативный API драйвера :
    
        ![alt text](https://i0.wp.com/proselyte.net/wp-content/uploads/2016/03/jdbc-driver-type2.jpg?resize=300%2C254&ssl=1)
    + Если мы меняем БД, то нам необходимо изменить и нативный API, который будет работать с конкретной БД.
    
+ ___Тип 3_. JDBC - Драйвер на основе библиотеки Java__.
    + Этот тип драйверов использует трехзвенный подход для получения доступа к БД.
    + Для связи с промежуточным сервером используется стандартный сетевой сокет. Информация, полученная от этого сокета, транслируется промежуточным сервером в формат, который необходим конкретной БД и направляется в сервер БД.
    + Схема работы JDBC - Драйвера на основе библиотеки Java : 
        
        ![alt text](https://i2.wp.com/proselyte.net/wp-content/uploads/2016/03/jdbc-driver-type3.jpg?resize=300%2C227&ssl=1)
    + Этот подход является крайне гибким, так как нет необходимости устанавливать ПО на стороне клиента и один драйвер способен обеспечить доступ к различным БД.

+ ___Тип 4_. Чистая Java__.
    + Этот тип драйверов разработан полностью с использованием языка программирования Java и работает с БД через сокетное соединение.
    + Главное преимущество такого драйвера - это наибольшая производительность, и обычно такие драйверы предоставляются разработчиками БД.
    + Схема работы драйвера на чистой Java :
    
        ![alt text](https://i2.wp.com/proselyte.net/wp-content/uploads/2016/03/jdbc-driver-type4.jpg?resize=300%2C275&ssl=1)   
    + Еще одно преимущество такого типа драйвера - это невероятная гибкость. Нам не нужно устанавливать никакого дополнительного программного обеспечения.
    + Ярким примером такого драйвера является _MySQL Connector/J_.

[к оглавлению](#JDBC)

## Какой тип драйвера выбрать?
+ Когда мы работаем с такими БД, как MySQL, Oracle и т.д., наиболее предпочтительным будет использования драйвера типа `4`.
+ Если наше приложение использует различные виды БД, то тип `3` будет более приемлемым.
+ Если для нашей БД еще нет драйверов `3` или `4`, то мы будем вынуждены использовать драйвер под номером `2`.
+ Драйвер типа `1` обычно не используется в коммерческой разработке.   

[к оглавлению](#JDBC) 
